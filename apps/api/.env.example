# Environment
NODE_ENV=development
PORT=8200

# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/cotiza_quoting

# Redis
REDIS_URL=redis://localhost:6379

# Authentication
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN=7d

# CORS
ALLOWED_ORIGINS=http://localhost:3002,https://cotiza.studio,https://staging.cotiza.studio
CORS_MAX_AGE_SECONDS=86400

# AWS S3
AWS_REGION=us-east-1
S3_BUCKET=cotiza-quoting-uploads
S3_ACCESS_KEY_ID=your-aws-access-key
S3_SECRET_ACCESS_KEY=your-aws-secret-key
KMS_KEY_ID=your-kms-key-id

# Stripe
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# Currency Configuration
DEFAULT_CURRENCY=MXN
SUPPORTED_CURRENCIES=MXN,USD,EUR,BRL,GBP,CAD,CNY,JPY
FX_SOURCE=openexchangerates
OPENEXCHANGE_APP_ID=your-openexchangerates-app-id

# IP Geolocation
IPINFO_TOKEN=your-ipinfo-token

# Geo-detection Feature Flags
ENABLE_GEO_DETECTION=true
ENABLE_MULTI_CURRENCY=true
GEO_CACHE_TTL=86400
RATES_CACHE_TTL=3600

# Localization
DEFAULT_LOCALES=es,en
DEFAULT_LOCALE=es

# Email (SMTP fallback for local development)
SMTP_HOST=smtp.protonmail.com
SMTP_PORT=587
SMTP_USER=innovacionescotiza@proton.me
SMTP_PASS=your-smtp-password

# Janua Email Service (centralized Resend integration)
# When configured, emails are sent via Janua's Resend service
JANUA_API_URL=https://api.janua.dev
JANUA_INTERNAL_API_KEY=your-janua-internal-api-key

# Worker Service
WORKER_SERVICE_URL=http://localhost:8000

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# ForgeSight Pricing Intelligence (MADFAM Integration)
FORGESIGHT_API_URL=https://api.forgesight.madfam.io
FORGESIGHT_API_KEY=your-forgesight-api-key

# Coforma Studio - Customer Advisory Board (MADFAM Integration)
COFORMA_API_URL=https://api.coforma.studio
COFORMA_API_KEY=your-coforma-api-key
COFORMA_TENANT_ID=madfam
COFORMA_PRODUCT_ID=digifab-quoting

# Feature Flags
ENABLE_SUPPLIER_PORTAL=false
ENABLE_SUSTAINABILITY_SCORING=true
ENABLE_NDA_TRACKING=true

# Quote Settings
QUOTE_VALIDITY_DAYS=14
MIN_ORDER_VALUE_MXN=500
MAX_FILE_SIZE_MB=100

# Timeouts (in milliseconds)
DEFAULT_TIMEOUT_MS=30000
FILE_UPLOAD_TIMEOUT_MS=300000
GEOMETRY_ANALYSIS_TIMEOUT_MS=120000
ADMIN_OPERATION_TIMEOUT_MS=60000
PAYMENT_TIMEOUT_MS=30000
WORKER_SERVICE_TIMEOUT_MS=300000

# Job Queue Settings
JOB_QUEUE_COMPLETED_RETENTION=100
JOB_QUEUE_FAILED_RETENTION=1000
JOB_QUEUE_ATTEMPTS=3
JOB_QUEUE_BACKOFF_DELAY_MS=2000
QUOTE_CALCULATION_TIMEOUT_MS=60000
FILE_ANALYSIS_TIMEOUT_MS=120000
EMAIL_NOTIFICATION_TIMEOUT_MS=30000

# Redis Connection Settings
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_RETRY_STRATEGY_MAX_MS=2000

# Cache TTLs (in seconds)
CACHE_PRICING_RULES_TTL=3600
CACHE_TENANT_CONFIG_TTL=1800
CACHE_USER_SESSION_TTL=900
CACHE_QUOTE_CALCULATION_TTL=3600

# Audit Settings
AUDIT_LOG_DEFAULT_LIMIT=50
AUDIT_LOG_EXPORT_MAX_LIMIT=10000

# File Analysis Settings
FILE_ANALYSIS_PROGRESS_INTERVAL_MS=5000

# Frontend URL
FRONTEND_URL=http://localhost:3002

# Default Ports (fallback values)
FALLBACK_API_PORT=8200
FALLBACK_WEB_PORT=3002
FALLBACK_WORKER_PORT=8000

# Janua Webhook (for receiving billing events)
JANUA_WEBHOOK_SECRET=your-janua-webhook-secret
